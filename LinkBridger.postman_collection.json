{
	"info": {
		"_postman_id": "linkbridger-api-collection",
		"name": "LinkBridger API Collection",
		"description": "Complete API collection for LinkBridger application. Includes all authentication, links, profile, settings, and search endpoints.",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Authentication",
			"item": [
				{
					"name": "Send OTP (Signup)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    pm.environment.set(\"email\", pm.request.body.raw ? JSON.parse(pm.request.body.raw).email : \"\");",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"user@example.com\",\n    \"username\": \"testuser\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/auth/signup",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"auth",
								"signup"
							]
						},
						"description": "Send OTP to email for account verification during signup. Username is optional."
					},
					"response": []
				},
				{
					"name": "Verify Account (Complete Signup)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"{{email}}\",\n    \"username\": \"testuser\",\n    \"password\": \"password123\",\n    \"otp\": \"1234\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/auth/verifyacc",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"auth",
								"verifyacc"
							]
						},
						"description": "Complete signup by verifying OTP. Requires email, username (min 5 chars), password, and OTP."
					},
					"response": []
				},
				{
					"name": "Sign In",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const response = pm.response.json();",
									"    if (response.user) {",
									"        pm.environment.set(\"username\", response.user.username);",
									"        pm.environment.set(\"userId\", response.user._id);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"user@example.com\",\n    \"password\": \"password123\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/auth/signin",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"auth",
								"signin"
							]
						},
						"description": "Sign in with email and password. Token is stored in cookies automatically."
					},
					"response": []
				},
				{
					"name": "Verify Token (Get User Info)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Cookie",
								"value": "token={{token}}",
								"description": "Token from signin cookie"
							}
						],
						"url": {
							"raw": "{{base_url}}/auth/verify",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"auth",
								"verify"
							]
						},
						"description": "Verify authentication token and get user information. Requires valid token in cookies."
					},
					"response": []
				},
				{
					"name": "Check Username Availability",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"username\": \"testuser\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/auth/checkavailablity",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"auth",
								"checkavailablity"
							]
						},
						"description": "Check if username is available. Returns status 209 if exists, 200 if available."
					},
					"response": []
				},
				{
					"name": "Sign Out",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Cookie",
								"value": "token={{token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/auth/signout",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"auth",
								"signout"
							]
						},
						"description": "Sign out and clear authentication cookie."
					},
					"response": []
				},
				{
					"name": "Password Reset - Send OTP",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"user@example.com\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/auth/password_reset",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"auth",
								"password_reset"
							]
						},
						"description": "Send OTP to email for password reset."
					},
					"response": []
				},
				{
					"name": "Password Reset - Validate OTP & Change Password",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"{{email}}\",\n    \"otp\": \"1234\",\n    \"password\": \"newpassword123\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/auth/validate_otp",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"auth",
								"validate_otp"
							]
						},
						"description": "Validate OTP and change password. OTP is deleted after successful validation."
					},
					"response": []
				}
			],
			"description": "Authentication endpoints for user signup, signin, verification, and password reset."
		},
		{
			"name": "Links",
			"item": [
				{
					"name": "Add New Source",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Cookie",
								"value": "token={{token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"username\": \"{{username}}\",\n    \"source\": \"linkedin\",\n    \"destination\": \"https://linkedin.com/in/username\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/source/addnewsource",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"source",
								"addnewsource"
							]
						},
						"description": "Add a new link/source. Source is normalized to lowercase. Requires authentication."
					},
					"response": []
				},
				{
					"name": "Get All Sources",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Cookie",
								"value": "token={{token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"username\": \"{{username}}\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/source/getallsource",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"source",
								"getallsource"
							]
						},
						"description": "Get all links/sources for a user. Returns source, destination, clicked, notSeen, visibility, and linkId. Requires authentication."
					},
					"response": []
				},
				{
					"name": "Edit Link",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Cookie",
								"value": "token={{token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"id\": \"link_id_here\",\n    \"source\": \"linkedin\",\n    \"destination\": \"https://linkedin.com/in/newusername\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/source/editlink",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"source",
								"editlink"
							]
						},
						"description": "Edit an existing link. Source and destination are optional. Requires authentication and ownership."
					},
					"response": []
				},
				{
					"name": "Delete Link",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Cookie",
								"value": "token={{token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"id\": \"link_id_here\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/source/deletelink",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"source",
								"deletelink"
							]
						},
						"description": "Delete a link by ID. Requires authentication."
					},
					"response": []
				},
				{
					"name": "Set Notifications to Zero",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Cookie",
								"value": "token={{token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/source/notifications",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"source",
								"notifications"
							]
						},
						"description": "Reset all notification counts (notSeen) to zero for all user's links. Requires authentication."
					},
					"response": []
				},
				{
					"name": "Update Link Visibility",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Cookie",
								"value": "token={{token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"id\": \"link_id_here\",\n    \"visibility\": \"public\",\n    \"password\": \"optional_password_for_unlisted\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/source/updatevisibility",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"source",
								"updatevisibility"
							]
						},
						"description": "Update link visibility. Options: 'public', 'unlisted', 'private'. Password required for 'unlisted'. Requires authentication."
					},
					"response": []
				}
			],
			"description": "Link management endpoints for adding, editing, deleting, and managing link visibility."
		},
		{
			"name": "Profile",
			"item": [
				{
					"name": "Update Profile",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"username\": \"{{username}}\",\n    \"name\": \"John Doe\",\n    \"location\": \"New York, USA\",\n    \"bio\": \"Software Developer\",\n    \"passion\": \"Coding\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/profile/update",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"profile",
								"update"
							]
						},
						"description": "Update user profile information. All fields are optional and will be set to empty strings if not provided."
					},
					"response": []
				},
				{
					"name": "Get Profile Info",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"username\": \"{{username}}\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/profile/getprofileinfo",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"profile",
								"getprofileinfo"
							]
						},
						"description": "Get profile information for a user by username."
					},
					"response": []
				},
				{
					"name": "Update Profile Picture",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"username\": \"{{username}}\",\n    \"image\": \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNk+M9QDwADhgGAWjR9awAAAABJRU5ErkJggg==\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/profile/updatepic",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"profile",
								"updatepic"
							]
						},
						"description": "Update profile picture. Image should be base64 encoded data URL. Image is uploaded to Cloudinary."
					},
					"response": []
				},
				{
					"name": "Get Public Profile",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"username\": \"testuser\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/profile/getpublicprofile",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"profile",
								"getpublicprofile"
							]
						},
						"description": "Get public profile information. Returns profile data, public links, settings, and stats based on user's privacy settings. No authentication required."
					},
					"response": []
				}
			],
			"description": "Profile management endpoints for updating and retrieving user profile information."
		},
		{
			"name": "Settings",
			"item": [
				{
					"name": "Get Settings",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Cookie",
								"value": "token={{token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"username\": \"{{username}}\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/settings/get",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"settings",
								"get"
							]
						},
						"description": "Get user settings. Username is optional - if not provided, uses authenticated user's ID. Requires authentication."
					},
					"response": []
				},
				{
					"name": "Update Settings",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Cookie",
								"value": "token={{token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"username\": \"{{username}}\",\n    \"profile\": {\n        \"isPublic\": true,\n        \"allowProfileView\": true,\n        \"showProfileImage\": true,\n        \"showBio\": true,\n        \"showLocation\": true,\n        \"showPassion\": true\n    },\n    \"links\": {\n        \"showLinkCount\": true,\n        \"showClickStats\": true\n    },\n    \"search\": {\n        \"allowSearch\": true,\n        \"searchKeywords\": [\"developer\", \"coder\"]\n    },\n    \"privacy\": {\n        \"hideEmail\": true,\n        \"hideUsername\": false\n    },\n    \"notifications\": {\n        \"emailNotifications\": true,\n        \"visitNotifications\": true\n    }\n}"
						},
						"url": {
							"raw": "{{base_url}}/settings/update",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"settings",
								"update"
							]
						},
						"description": "Update user settings. You can update any section (profile, links, search, privacy, notifications) independently. Requires authentication."
					},
					"response": []
				}
			],
			"description": "User settings endpoints for managing privacy, visibility, and notification preferences."
		},
		{
			"name": "Search",
			"item": [
				{
					"name": "Search Users",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"query\": \"test\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/search/users",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"search",
								"users"
							]
						},
						"description": "Search for users by username or name. Only returns users who have isPublic=true and allowSearch=true in their settings. No authentication required. Returns up to 20 results."
					},
					"response": []
				}
			],
			"description": "Search endpoints for finding users."
		},
		{
			"name": "Public Routes",
			"item": [
				{
					"name": "Get User Link Tree",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/:username",
							"host": [
								"{{base_url}}"
							],
							"path": [
								":username"
							],
							"variable": [
								{
									"key": "username",
									"value": "testuser",
									"description": "Username to get link tree for"
								}
							]
						},
						"description": "Get user's link tree page. Renders EJS template with all user links. Sends visit notification email. No authentication required."
					},
					"response": []
				},
				{
					"name": "Redirect to Source",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/:username/:source",
							"host": [
								"{{base_url}}"
							],
							"path": [
								":username",
								":source"
							],
							"variable": [
								{
									"key": "username",
									"value": "testuser",
									"description": "Username"
								},
								{
									"key": "source",
									"value": "linkedin",
									"description": "Source/platform name"
								}
							]
						},
						"description": "Redirect to destination URL for a specific source. Increments click and notSeen counters. Sends visit notification email. No authentication required."
					},
					"response": []
				}
			],
			"description": "Public routes that don't require authentication. Used for sharing and accessing user link trees."
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:8080",
			"type": "string"
		},
		{
			"key": "token",
			"value": "",
			"type": "string",
			"description": "Authentication token from signin (stored in cookies)"
		},
		{
			"key": "username",
			"value": "",
			"type": "string"
		},
		{
			"key": "email",
			"value": "",
			"type": "string"
		},
		{
			"key": "userId",
			"value": "",
			"type": "string"
		}
	]
}









